"use strict";angular.module("lwControllers",[]),angular.module("lwDirectives",[]),angular.module("lwFilters",[]),angular.module("lwServices",["ngResource"]),angular.module("lw",["ngRoute","lwFilters","lwDirectives","lwControllers","lwServices"]).config(["$httpProvider",function(a){a.interceptors.push("Loading")}]).config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self","http://media.lilymandarin.com/**","https://media.lilymandarin.com/**","http://www.youtube.com/embed/**","https://www.youtube.com/embed/**","http://player.youku.com/embed/**","https://player.youku.com/embed/**"])}]).run(["$rootScope","ClickTap","Alert","Modal",function(a,b,c,d){a.$on("$routeChangeStart",function(){c.hide(),a.error=null}),a.hideAlert=c.hide,a.hideModal=d.hide}]),window.log=function(){window.console.log.apply(window.console,arguments)},window.warn=function(){window.console.warn.apply(window.console,arguments)},window.error=function(){window.console.error.apply(window.console,arguments)},window.addEventListener("load",function(){FastClick.attach(document.body)},!1),angular.module("lwControllers").controller("Home",["$rootScope","$scope","Article","Analytics","Modal","Alert",function(a,b,c,d,e,f){function g(){e.show({templateUrl:"/views/reviewsModal.html",controller:"Reviews"})}function h(a){if(!a)return f.show("Home","error","Cannot get tab for null article"),null;switch(a.category){case"post":return"posts";case"photo":return"photos";case"music":case"movie":return"videos";default:return f.show("Home","error",'Cannot get tab for article category: "'+a.category+'"'),null}}a.title="LilyMandarin",d.page(),a.tab="home",b.email="fangyan61@gmail.com",b.latest={posts:[],photos:[],videos:[]};var i={categories:"post,photo,music|movie",count:4,validatedBefore:"0",validatedOnly:!0};c.query(i,function(a){a.forEach(function(a){var c=h(a);c&&b.latest[c].push(a)})}),b.showReviews=function(a){1===a.which&&(a.preventDefault(),g())}}]),angular.module("lwControllers").controller("Photo",["$rootScope","$scope","$routeParams","Article","Analytics","Domain","$location",function(a,b,c,d,e,f,g){a.tab="photos",d.get({id:c.id},function(c){var d="/photo/"+c.id+"/"+c.slug;if(g.path()!==d)return void g.path(d).replace();a.title=c.title+" — LilyMandarin",e.page(),b.socialUrl=f.origin+d;var h=c.lines[0];b.socialText=h["zh-CN"]+" / "+h["en-US"],b.photo=c;var i=c.internal.medias["main-photo"];b.photoHeight=i?i.height:100,b.photoWidth=i?i.width:100})}]),angular.module("lwControllers").controller("Photos",["$rootScope","$scope","$window","Article","Analytics","Admin",function(a,b,c,d,e,f){function g(a,c){b.css="lw-photo { width: "+c.width+"px; }",a.forEach(function(a){var b=i(c.heights),d=c.heights[b],e=b*(c.width+m),f=a.internal.medias["main-photo"],g=f?f.height:100,h=f?f.width:100,j=Math.floor(g*c.width/h);c.heights[b]+=j+m,a.style=a.style||{},a.style.top=d+"px",a.style.left=e+"px",a.style.height=j+"px"})}function h(a,b){for(var c=Math.ceil((a+m)/(p+m)),d=Math.ceil((a+m)/(b*o*n+m)),e=Math.max(c,d),f=[],g=0;e>g;g++)f[g]=0;return{width:Math.floor((a-(e-1)*m)/e),heights:f}}function i(a){for(var b=0,c=1;c<a.length;c++)a[c]<a[b]&&(b=c);return b}function j(a){return a.reduce(function(a,b){return Math.max(a,b)})}function k(){b.totalHeight=j(l.heights)-m}a.title="Photos — LilyMandarin",e.page(),a.tab="photos",b.photos=[];var l,m=5,n=.75,o=.9,p=590,q=document.body.clientWidth,r=c.innerHeight;angular.element(c).on("resize",function(){(q!==document.body.clientWidth||r!==c.innerHeight)&&(q=document.body.clientWidth,r=c.innerHeight,l=h(q,r),b.$apply(function(){g(b.photos,l),k()}))}),b.load=function(){b.loadStatus="loading";var a={categories:"photo",count:30},e=b.photos.length;e?(a.validatedBefore=b.photos[e-1].firstValidationTimeNano,a.validatedOnly=!0):(a.validatedBefore="0",a.validatedOnly=!f),d.query(a,function(d){l||(l=h(document.body.clientWidth,c.innerHeight)),g(d,l),k(),b.photos=b.photos.concat(d),b.loadStatus=d.length<a.count?"ended":"ready"})},b.load()}]),angular.module("lwControllers").controller("Post",["$rootScope","$scope","$routeParams","Article","Analytics","Domain","$location",function(a,b,c,d,e,f,g){a.tab="posts",d.get({id:c.id},function(c){var d="/post/"+c.id+"/"+c.slug;if(g.path()!==d)return void g.path(d).replace();a.title=c.title+" — LilyMandarin",e.page(),b.socialUrl=f.origin+d;var h=c.lines[0];b.socialText=h["zh-CN"]+" / "+h["en-US"],b.post=c})}]),angular.module("lwControllers").controller("Posts",["$rootScope","$scope","$routeParams","$location","Article","Analytics","Admin",function(a,b,c,d,e,f,g){a.title="Posts — LilyMandarin",f.page(),a.tab="posts",b.posts=[],b.load=function(){b.loadStatus="loading";var a={categories:"post",count:20},c=b.posts.length;c?(a.validatedBefore=b.posts[c-1].firstValidationTimeNano,a.validatedOnly=!0):(a.validatedBefore="0",a.validatedOnly=!g),e.query(a,function(c){b.posts=b.posts.concat(c),b.loadStatus=c.length<a.count||c.length&&!c[c.length-1].validated?"ended":"ready"})},b.load()}]),angular.module("lwControllers").controller("Reviews",["$rootScope","$scope","Analytics","Review",function(a,b,c,d){a.modal||(a.title="Student reviews — LilyMandarin",a.tab="home",c.page()),b.reviews=d.query()}]),angular.module("lwControllers").controller("Video",["$rootScope","$scope","$routeParams","$location","Article","Analytics","Source","Domain",function(a,b,c,d,e,f,g,h){function i(a){b.sources.current=a,b.sources.remaining=g.remaining(b.sources.available,a)}a.tab="videos",b.sources={},b.setSource=function(a){g.setFavorite(a),i(a)},b.toggleTranslation=function(a){a.showTranslation=!a.showTranslation},e.get({id:c.id},function(c){var e="/video/"+c.id+"/"+c.slug;if(d.path()!==e)return void d.path(e).replace();a.title=c.title+" — LilyMandarin",f.page(),b.socialUrl=h.origin+e,b.socialText=c.title,b.video=c;var j=c.internal.medias["main-video"];b.videoHeight=j?j.height:100,b.videoWidth=j?j.width:100,b.sources.available=g.available(c),i(g.best(b.sources.available))})}]),angular.module("lwControllers").controller("Videos",["$rootScope","$scope","$routeParams","$location","Article","Analytics","Admin",function(a,b,c,d,e,f,g){a.title="Videos — LilyMandarin",f.page(),a.tab="videos",b.videos=[],b.load=function(){b.loadStatus="loading";var a={categories:"music|movie",count:20},c=b.videos.length;c?(a.validatedBefore=b.videos[c-1].firstValidationTimeNano,a.validatedOnly=!0):(a.validatedBefore="0",a.validatedOnly=!g),e.query(a,function(c){b.videos=b.videos.concat(c),b.loadStatus=c.length<a.count?"ended":"ready"})},b.load()}]),angular.module("lwDirectives").directive("lwAdmin",["Admin",function(a){var b={restrict:"E",replace:!0,transclude:!0};return b.template=a?'<div ng-transclude class="admin"></div>':"",b}]),angular.module("lwDirectives").directive("lwCard",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"/views/lwCard.html",controller:["$scope",function(a){a.flipped=!1,a.flip=function(){a.flipped=!a.flipped}}]}}),angular.module("lwDirectives").directive("lwCarousel",function(){return{restrict:"E",controller:["$scope","$attrs","$timeout",function(a,b,c){function d(){a.carousel>=g&&(a.carousel=Math.max(0,g-1)),e||0>=f||2>g||(e=c(function(){a.carousel=(a.carousel+1)%g,e=null,d()},1e3*f))}a.carousel=0;var e,f=0,g=0;b.$observe("period",function(a){f=angular.isDefined(a)?a:4,d()}),b.$observe("max",function(a){g=angular.isDefined(a)?a:Number.MAX_VALUE,d()})}]}}),angular.module("lwDirectives").directive("lwCenter",function(){return{restrict:"A",transclude:!0,template:"<div><div><div><div ng-transclude></div></div></div></div>"}}),angular.module("lwDirectives").directive("lwMore",function(){return{restrict:"E",templateUrl:"/views/lwMore.html"}}),angular.module("lwDirectives").directive("lwPhoto",function(){return{restrict:"E",scope:{photo:"="},templateUrl:"/views/lwPhoto.html",controller:["$scope","ClickTap","Domain",function(a,b,c){if(a.photo){var d="/photo/"+a.photo.id+"/"+a.photo.slug;a.socialUrl=c.origin+d;var e=a.photo.lines[0];a.socialText=e["zh-CN"]+" / "+e["en-US"]}a.clickTap=b}]}}),angular.module("lwDirectives").directive("lwPost",function(){return{restrict:"E",scope:{post:"=",clickable:"="},templateUrl:"/views/lwPost.html",controller:["$scope","Domain",function(a,b){if(a.post){var c="/post/"+a.post.id+"/"+a.post.slug;a.socialUrl=b.origin+c;var d=a.post.lines[0];a.socialText=d["zh-CN"]+" / "+d["en-US"]}}]}}),angular.module("lwDirectives").directive("lwProgress",function(){return{restrict:"E",scope:{loading:"="},templateUrl:"/views/lwProgress.html",controller:["$scope","$timeout",function(a,b){function c(){e=b(c,500),a.progress=100-.9*(100-a.progress)}function d(){e=null,a.progress=0}a.progress=0;var e;a.$watch("loading",function(f){e&&b.cancel(e),f?(a.progress=0,e=b(c,0)):(e=b(d,500),a.progress=100)})}]}}),angular.module("lwDirectives").directive("lwSocial",function(){return{restrict:"E",scope:{url:"=",text:"="},templateUrl:"/views/lwSocial.html",controller:["$scope",function(a){function b(a){window.open(a,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")}function c(a){return a[0].href}a.$watch("url",function(b){a.encodedUrl=b?encodeURIComponent(b):""}),a.$watch("text",function(b){a.encodedText=b?encodeURIComponent(b):""}),a.popup=function(a){for(var d=angular.element(a.target),e=c(d),f=0;!e&&5>f;)d=d.parent(),e=c(d);e&&(a.preventDefault(),b(e),a.stopPropagation())}}]}}),angular.module("lwDirectives").directive("lwStatus",function(){return{restrict:"E",scope:{article:"="},templateUrl:"/views/lwStatus.html"}}),angular.module("lwDirectives").directive("lwSticky",function(){function a(){var a=document.createElement("div");return a.style.cssText="position: -webkit-sticky;position: -moz-sticky;position: -ms-sticky;position: -o-sticky;position: sticky;",/sticky/.test(a.style.position)}var b={restrict:"A",transclude:!0,template:"<div ng-transclude></div>"};return a()?b:(b.controller=["$element","$window",function(a,b){function c(){var b="";e&&(b=a.children()[0].clientHeight+"px"),d!==b&&(d=b,a.css("height",d))}var d,e=!1;angular.element(b).on("scroll",function(){var b=a[0].offsetTop<window.scrollY;e!==b&&(e=b,c(),a.toggleClass("stuck",e))}).triggerHandler("scroll"),a.on("resize",c)}],b)}),angular.module("lwDirectives").directive("lwStyle",function(){return{restrict:"A",replace:"false",link:function(a,b,c){c.$observe("css",function(a){b.html(a||"")})}}}),angular.module("lwDirectives").directive("lwTopHalf",function(){return{restrict:"A",scope:{aspectRatio:"@lwTopHalf"},controller:["$element","$window","$document","$scope",function(a,b,c,d){function e(){return{width:c[0].body.clientWidth,height:b.innerHeight}}function f(){var b=parseFloat(d.aspectRatio);if(!isNaN(b)){var c=e(),f=c.height/2,g=f*b,h=Math.min(c.width,g),i=h/b;a.css("height",i+"px")}}d.$watch("aspectRatio",f);var g=e();angular.element(b).on("resize",function(){var a=e();(g.width!==a.width||g.height!==a.height)&&(g=a,f())})}]}}),angular.module("lwDirectives").directive("lwVideo",function(){return{restrict:"E",scope:{source:"="},templateUrl:"/views/lwVideo.html"}}),angular.module("lwDirectives").directive("lwVideoHeader",function(){return{restrict:"E",scope:{video:"=",socialUrl:"=",socialText:"="},templateUrl:"/views/lwVideoHeader.html"}}),angular.module("lwDirectives").directive("lwWrite",function(){return{restrict:"E",link:function(a,b,c){var d=document.write;document.write=function(a){b.html(a)};var e=document.createElement("script");e.src=c.src,e.onload=function(){document.write=d,b.addClass("loaded")},b.append(e)}}}),angular.module("lwFilters").filter("ago",["$filter",function(a){return function(b){if("number"!=typeof b||isNaN(b))return b;if("en-US"===document.documentElement.lang){var c=Math.round(b/1e3);if(10>c)return"just now";var d=" ago",e=Math.floor,f=a("plural");if(60>c)return f(10*e(c/10),"second")+d;if(3600>c)return f(e(c/60),"minute")+d;if(86400>c)return f(e(c/3600),"hour")+d;if(2678400>c)return f(e(c/3600/24),"day")+d;var g=30.4375,h=function(a){return f(e(a/3600/24/g),"month")+d};if(86400*g*12>c)return h(c);var i=e(c/3600/24/g/12),j=c-3600*i*24*g*12;return i=f(i,"year"),86400*g>j?i+d:i+" and "+h(j)}return b}}]),angular.module("lwFilters").filter("fancyDate",["$filter",function(a){function b(a){var b=a.getDate();switch(b){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}}return function(c){if("number"!=typeof c||isNaN(c))return c;if("en-US"===document.documentElement.lang){var d=new Date(c),e=a("date"),f=e(d,"MMMM d, y"),g=b(d);return f.replace(",",g+",")}return c}}]),angular.module("lwFilters").filter("fancySource",function(){return function(a){if(!a)return"[cannot get type of null source]";switch(a.type){case"internal":return"LilyMandarin.com";case"external-youtube":return"YouTube";case"external-youku":return"Youku";default:return'[unknown source type: "'+a.type+'"]'}}}),angular.module("lwFilters").filter("imgSrc",["Alert","Domain",function(a,b){function c(a,b){for(var c=b.length-1;c>=0;c--){var d=b[c];if(a>=d)return d}return b[0]}function d(a){for(var b=[],c=0;c<g.length;c++){var d=g[c];if(!(d<a.width))break;b.push(d)}return b.push(a.width),b}function e(a){return"_w"+a+"p"}function f(b){switch(b.type){case"photo":return b.internal.medias["main-photo"];case"video":return b.internal.medias["poster-photo"];default:return a.show("Article","error","Cannot get imgSrc for article id: "+b.id+", type: "+b.type),null}}var g=[300,400,600,900,1200];return function(a,g){if(!a)return null;g||(g=600);var h=f(a);if(!h||!h.filename)return"";var i=c(g,d(h));return b.media+"/media/"+h.filename+e(i)+".jpg"}}]),angular.module("lwFilters").filter("plural",function(){return function(a,b){return"number"!=typeof a||isNaN(a)?a:b?"en-US"===document.documentElement.lang?a+" "+b+(Math.abs(a)>1?"s":""):a:a+""}}),angular.module("lwFilters").filter("progress",function(){return function(a){return 0>a?"Processing failed.":100>a?"Processing — "+a+"% done. Refresh page to update.":"Processing done."}}),angular.module("lwFilters").filter("responseError",function(){return function(a){return a.config.method+" "+a.config.url+" → Error "+a.status+": "+a.data}}),angular.module("lwFilters").filter("ufl",function(){return function(a){return a?a.substring(0,1).toUpperCase()+a.substring(1):a}}),angular.module("lwFilters").filter("videoSrc",["Alert","Domain",function(a,b){function c(a){for(var b,c=0;c<a.length&&!(c>0&&b.h>f);c++)b=a[c];return b}function d(b,c){var d=h[c];if(!d)return a.show("Article","error","Cannot get videoSrc variants for format: "+c),null;for(var e=[],f=0;f<d.length;f++){var g=d[f];if(!(0===f||g.h<b.height))break;e.push(g)}return e}function e(a){return"_h"+a.h+"p-b"+a.b+"k"}var f=360,g=[{h:270,b:350},{h:360,b:650},{h:540,b:1e3},{h:720,b:1500},{h:1080,b:2300}],h={mp4:g,webm:g};return function(a,f){var g=d(a,f);if(!g)return"";var h=c(g);return b.media+"/media/"+a.value+e(h)+"."+f}}]),angular.module("lw").config(["$locationProvider","$routeProvider",function(a,b){a.html5Mode(!0),b.when("/",{templateUrl:"/views/home.html",controller:"Home"}).when("/reviews",{templateUrl:"/views/reviews.html",controller:"Reviews"}).when("/posts",{templateUrl:"/views/posts.html",controller:"Posts"}).when("/post/:id",{templateUrl:"/views/post.html",controller:"Post"}).when("/post/:id/:slug",{templateUrl:"/views/post.html",controller:"Post"}).when("/photos",{templateUrl:"/views/photos.html",controller:"Photos"}).when("/photo/:id",{templateUrl:"/views/photo.html",controller:"Photo"}).when("/photo/:id/:slug",{templateUrl:"/views/photo.html",controller:"Photo"}).when("/videos",{templateUrl:"/views/videos.html",controller:"Videos"}).when("/video/:id",{templateUrl:"/views/video.html",controller:"Video"}).when("/video/:id/:slug",{templateUrl:"/views/video.html",controller:"Video"}).otherwise({redirectTo:"/"})}]),angular.module("lwServices").constant("Admin",/((; )|^)admin=true(;|$)/.test(document.cookie)),angular.module("lwServices").factory("Alert",["$rootScope","$filter",function(a,b){return{show:function(c,d,e){"object"==typeof e&&(e=b("responseError")(e)),a.alert={id:c,type:d,message:e}},hide:function(b){(!b||a.alert&&a.alert.id===b)&&(a.alert=null)}}}]),angular.module("lwServices").factory("Analytics",["$rootScope","$window","$log",function(a,b,c){return{page:function(){return b.ga?void b.ga("send","pageview",a.title):void c.warn("Analytics: ga not available.")}}}]),angular.module("lwServices").factory("Article",["$resource","$rootScope","Alert",function(a,b,c){var d={responseError:function(a){404===a.status?b.error="Page not found. :(":(c.show("Article","error",a),b.error="Error "+a.status+". :(")}};return a("",{},{query:{method:"GET",url:"/api/v1/articles.json?categories=:categories&count=:count&validated_before=:validatedBefore&validated_only=:validatedOnly",isArray:!0,interceptor:d},get:{method:"GET",url:"/api/v1/articles/:id.json",interceptor:d}})}]),angular.module("lwServices").constant("ClickTap","ontouchstart"in document.documentElement?"tap":"click"),angular.module("lwServices").constant("Domain",{origin:"http://lilymandarin.com",media:"lilymandarin.com"===location.hostname?"//media.lilymandarin.com":""}),angular.module("lwServices").factory("Loading",["$q","$rootScope",function(a,b){function c(){0===e&&(b.loading=!0),e++}function d(){1===e&&(b.loading=!1),e>0&&e--}b.loading=!1;var e=0;return{request:function(b){return c(),b||a.when(b)},response:function(b){return d(),b||a.when(b)},responseError:function(b){return d(),a.reject(b)}}}]),angular.module("lwServices").factory("Modal",["$rootScope","$document",function(a,b){function c(b){27===b.which&&a.$apply(e)}function d(d){a.modal={templateUrl:d.templateUrl},b.on("keydown",c)}function e(){a.modal=null,b.off("keydown",c)}return{show:d,hide:function(a){(!a||angular.element(a.target).hasClass("modal"))&&e()}}}]),angular.module("lwServices").factory("Review",["$resource",function(a){return a("",{},{query:{method:"GET",url:"/data/reviews.json",isArray:!0}})}]),angular.module("lwServices").factory("Source",["Alert",function(a){var b=["internal","external-youtube","external-youku"];return{available:function(a){var b=[],c=a.internal.medias["main-video"];c&&c.filename&&b.push({type:"internal",value:c.filename,height:c.height});var d=a.external;for(var e in d)d.hasOwnProperty(e)&&d[e]&&b.push({type:"external-"+e,value:d[e]});return b},setFavorite:function(a){localStorage.favoriteSourceType=a.type},best:function(c){for(var d=localStorage.favoriteSourceType,e=d?[d].concat(b):b,f=0;f<b.length;f++)for(var g=e[f],h=0;h<c.length;h++){var i=c[h];if(i.type===g)return i}a.show("Source","error","No best source found: "+JSON.stringify(c))},remaining:function(a,b){return a.filter(function(a){return a.type!==b.type})}}}]),angular.module("lw").run(["$templateCache",function(a){a.put("/views/header.html",'<div ng-if=modal>\n    <div class="modal in" ng-click=hideModal($event)>\n        <div class=modal-dialog>\n            <div class=modal-content>\n                <div ng-include=modal.templateUrl></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div ng-if=alert>\n    <div class=alert-fixed>\n        <div class="alert alert-dismissable" ng-class="{warning: \'alert-warning\', success: \'alert-success\', error: \'alert-danger\', info: \'alert-info\'}[alert.type]">\n            <button type=button ng-click=hideAlert() class=close>&times;</button>\n            {{alert.message}}\n        </div>\n    </div>\n    <div class="alert alert-dismissable">\n        {{alert.message}}\n    </div>\n</div>\n\n<header>\n    <h2 class=title>\n        <a title=Homepage href="/">Lily</a>\n        <span class=tab-color ng-switch="" on=tab>\n            <span ng-switch-when=home>Mandarin</span>\n            <span ng-switch-when=posts>Posts</span>\n            <span ng-switch-when=photos>Photos</span>\n            <span ng-switch-when=videos>Videos</span>\n        </span>\n    </h2>\n    <nav>\n        <a href="/" class="tab home-tab">Home</a>\n        <a href=/posts class="tab posts-tab">Posts</a>\n        <a href=/photos class="tab photos-tab">Photos</a>\n        <a href=/videos class="tab videos-tab">Videos</a>\n    </nav>\n</header>\n\n<lw-progress loading=loading></lw-progress>'),a.put("/views/home.html",'<section class=latest>\n    <h3 class=padded>Latest</h3>\n    <div class=row>\n        <lw-carousel period=4>\n            <div class=col-xs-4 ng-repeat="tab in [\'posts\', \'photos\', \'videos\']" ng-class="\'col{{$index}}\'">\n                <a href=/{{tab}}>\n                    <div class=translucent-header>\n                        <div>{{tab | ufl}}</div>\n                        <small>{{latest[tab][0].ago | ago}}</small>\n                    </div>\n                    <div class=placeholder ng-repeat="article in latest[tab]" ng-class="{active: carousel % latest[tab].length == $index}" ng-style="{\'background-image\': \'url({{article | imgSrc: 397}})\'}"></div>\n                </a>\n            </div>\n        </lw-carousel>\n    </div>\n</section>\n\n<section class="mailchimp padded">\n    <label for=mailchimp-email>\n        <h3>Join the newsletter!</h3>\n    </label>\n\n    <form action="http://lilymandarin.us3.list-manage.com/subscribe/post?u=8a65a9b821e6f82d77ea3557d&amp;id=b6fc866739" method=post target=_blank>\n        <input type=email class="form-control input-lg" id=mailchimp-email name=EMAIL placeholder="Enter your email address" required><button type=submit class="btn btn-lg btn-primary">Subscribe</button>\n    </form>\n\n    <div class=perks>\n        <div>\n            <span class="icon icon-check-green"></span><span>One email a week</span>\n        </div>\n        <div>\n            <span class="icon icon-check-green"></span><span>Easy to unsubscribe – no spam</span>\n        </div>\n        <div>\n            <span class="icon icon-check-green"></span><span>Free!</span>\n        </div>\n    </div>\n\n    <div class=latest-campaign>\n        Latest sample:\n        <lw-write src="http://us3.campaign-archive1.com/generate-js/?u=8a65a9b821e6f82d77ea3557d&fid=3945&show=1">\n            <span>Loading...</span>\n        </lw-write>\n    </div>\n</section>\n\n<section class="lessons padded">\n    <h3>Private Chinese lessons</h3>\n    <div class=row>\n        <div class="col-xs-6 col-sm-3">\n            <div class="illus reputable"></div>\n            <h4>Reputable</h4>\n            <div>Four years teaching experience – <a href=/reviews ng-click=showReviews($event)>student reviews</a></div>\n        </div>\n        <div class="col-xs-6 col-sm-3">\n            <div class="illus adaptable"></div>\n            <h4>Adaptable</h4>\n            <div>Tailored to your interests – in Shanghai or on Skype</div>\n        </div>\n        <div class="clearfix visible-xs"></div>\n        <div class="col-xs-6 col-sm-3">\n            <div class="illus efficient"></div>\n            <h4>Efficient</h4>\n            <div>Lessons designed for fast and solid progression</div>\n        </div>\n        <div class="col-xs-6 col-sm-3">\n            <div class="illus bilingual"></div>\n            <h4>Trilingual</h4>\n            <div>English or French explanations</div>\n        </div>\n    </div>\n</section>\n\n<section class=contact>\n    <h3 class=padded>Contact me</h3>\n    <div class=portrait></div>\n    <div class=methods>\n        <div class="method email">\n            <a ng-href=mailto:{{email}} class="icon icon-email-white"></a><h4>{{email}}</h4>\n        </div>\n        <div class=method>\n            <a target=_blank href=https://www.facebook.com/yan.fang.5855>\n                <span class="icon icon-facebook-white"></span><h4>facebook.com/yan.fang.5855</h4>\n            </a>\n        </div>\n    </div>\n</section>'),a.put("/views/lwCard.html",'<a class=card ng-class="{flipped: flipped}" href=# ng-click=flip()>\n    <div ng-transclude=""></div>\n</a>'),a.put("/views/lwMore.html",'<div ng-switch="" on=loadStatus class=more>\n    <button type=button ng-switch-when=ready class="btn btn-primary" ng-click=load()>Load more {{tab}}</button>\n    <button type=button ng-switch-when=loading class="btn btn-primary" disabled>Loading...</button>\n    <button type=button ng-switch-when=ended class="btn btn-disabled" disabled>No more {{tab}}</button>\n</div>'),a.put("/views/lwPhoto.html",'<lw-card>\n    <div class=front>\n        <div class=translucent-header>\n            <small>{{clickTap | ufl}} to show translation</small>\n            <small>{{photo.ago | ago}}</small>\n        </div>\n        <img class=photo ng-if="photo | imgSrc" ng-src="{{photo | imgSrc: 600}}">\n    </div>\n    <div class=back>\n        <div class=photo-back>\n            <div>\n                <h1 class=zh-cn>{{photo.lines[0][\'zh-CN\']}}</h1>\n                <h3 class=pinyin>{{photo.lines[0][\'pinyin\']}}</h3>\n                <h3 class=en-us>{{photo.lines[0][\'en-US\']}}</h3>\n            </div>\n        </div>\n        <div class=photo-buttons>\n            <lw-social class=compact url=socialUrl text=socialText></lw-social><a class="btn btn-primary" href=/photo/{{photo.id}}/{{photo.slug}} target=_blank ng-click=$event.stopPropagation()>\n                <span class=icon-container>\n                    <span class="icon icon-link-white"></span>\n                </span>\n                <span class=text>Link</span>\n            </a>\n        </div>\n    </div>\n</lw-card>\n<lw-admin>\n    <lw-status article=photo></lw-status>\n</lw-admin>'),a.put("/views/lwPost.html","<div class=header>\n    <h3 class=date>{{post.firstValidationTime | fancyDate}}</h3>\n    <lw-admin>\n        <lw-status article=post></lw-status>\n    </lw-admin>\n</div>\n<div class=content>\n    <a ng-href=\"{{clickable ? ('/post/' + post.id + '/' + post.slug) : ''}}\" target=_blank class=poster>\n        <img ng-src=\"{{post | imgSrc: 500}}\">\n    </a>\n    <div class=text>\n        <h1 class=zh-cn>{{post.lines[0]['zh-CN']}}</h1>\n        <h4 class=pinyin>{{post.lines[0]['pinyin']}}</h4>\n        <h4 class=en-us>{{post.lines[0]['en-US']}}</h4>\n        <h4 class=fr-fr>{{post.lines[0]['fr-FR']}}</h4>\n        <lw-social class=compact url=socialUrl text=socialText></lw-social>\n    </div>\n</div>"),a.put("/views/lwProgress.html",'<div ng-style="{width: progress + \'%\'}" ng-class="{smooth: progress > 0, fade: progress == 100}"></div>'),a.put("/views/lwSocial.html",'<span ng-if=encodedUrl><a class="facebook btn" target=_blank ng-href="https://www.facebook.com/sharer/sharer.php?u={{encodedUrl}}" ng-click=popup($event)>\n    <span class=icon-container>\n        <span class="icon icon-facebook-white"></span>\n    </span>\n    <span class=text>Share on Facebook</span>\n</a><a class="twitter btn" target=_blank ng-href="http://twitter.com/intent/tweet?text={{encodedText}}&url={{encodedUrl}}" ng-click=popup($event)>\n    <span class=icon-container>\n        <span class="icon icon-twitter-white"></span>\n    </span>\n    <span class=text>Share on Twitter</span>\n</a></span>'),a.put("/views/lwStatus.html",'<a href=/admin/edit/{{article.id}} target=_blank class="edit btn btn-xs">Edit</a> \n<a href="/admin/{{article.validated ? \'unvalidate\' : \'validate\'}}/{{article.id}}" target=_blank class="validate btn btn-xs" ng-class="{validated: article.validated}">{{article.validated ? \'Validated\' : \'Not validated yet\'}}</a>\n<span class=processing ng-if="article.internal.progress < 100">{{article.internal.progress | progress}}</span>'),a.put("/views/lwVideo.html",'<div ng-switch="" on=source.type>\n    <video ng-switch-when=internal controls="" autoplay="">\n        <source type=video/mp4 ng-src="{{source | videoSrc: \'mp4\'}}">\n        </source><source type=video/webm ng-src="{{source | videoSrc: \'webm\'}}">\n    </source></video>\n\n    <iframe ng-switch-when=external-youtube ng-src="{{\'http://www.youtube.com/embed/\' + source.value + \'?modestbranding=1&cc_load_policy=0&theme=dark&autohide=1&autoplayy=1\'}}" frameborder=0 allowfullscreen></iframe>\n\n    <iframe ng-switch-when=external-youku ng-src="{{\'http://player.youku.com/embed/\' + source.value + \'?isAutoPlay=true\'}}" frameborder=0 allowfullscreen></iframe>\n</div>'),a.put("/views/lwVideoHeader.html",'<div class="padded video-header">\n    <div>\n        <h3><a href=/video/{{video.id}}/{{video.slug}}>{{video.title}}</a></h3>\n        <lw-admin>\n            <lw-status article=video></lw-status>\n        </lw-admin>\n    </div>\n    <small class=ago>{{video.ago | ago}}</small>\n</div>'),a.put("/views/photo.html",'<div class="center single">\n    <div>\n        <div class=placeholder ng-style="{\'padding-top\': 100 * photoHeight / photoWidth + \'%\'}">\n            <lw-photo photo=photo></lw-photo>\n        </div>\n        <div class=buttons>\n            <lw-social url=socialUrl text=socialText></lw-social><a class="btn btn-primary more" href=/photos>More photos</a>\n        </div>\n    </div>\n</div>'),a.put("/views/photos.html",'<lw-admin>\n    <a href="/admin/new/photo?category=photo" target=_blank class="btn btn-xs new">New</a>\n</lw-admin>\n<style lw-style="" css={{css}} scoped=""></style>\n<div ng-style="{height: totalHeight + \'px\'}">\n    <lw-photo ng-repeat="photo in photos" ng-style=photo.style photo=photo></lw-photo>\n</div>\n<div class=buttons>\n    <lw-more></lw-more>\n</div>'),a.put("/views/post.html",'<div class=center>\n    <div class="articles single">\n        <article class=padded>\n            <lw-post post=post clickable=false></lw-post>\n        </article>\n        <div class=buttons>\n            <lw-social url=socialUrl text=socialText></lw-social><a class="btn btn-primary more" href=/posts>More posts</a>\n        </div>\n    </div>\n</div>'),a.put("/views/posts.html",'<div class=center>\n    <div class=articles>\n        <lw-admin>\n            <a href="/admin/new/photo?category=post" target=_blank class="btn btn-xs new">New</a>\n        </lw-admin>\n        <article ng-repeat="post in posts" class=padded>\n            <lw-post post=post clickable=true></lw-post>\n        </article>\n        <div class=buttons>\n            <lw-more></lw-more>\n        </div>\n    </div>\n</div>'),a.put("/views/reviews.html",'<section class="reviews padded">\n    <h3>Student reviews</h3>\n    <div class=review ng-repeat="review in reviews">\n        <div>\n            <div class=photo>\n                <img ng-if=review.photo ng-src=/images/reviews/{{review.photo}}>\n            </div>\n            <div class=text>\n                <p>{{review.text}}</p>\n                <span>— {{review.name}}</span>\n            </div>\n        </div>\n    </div>\n    <small class=loading>Loading...</small>\n</section>'),a.put("/views/reviewsModal.html",'<div class=modal-body>\n    <button type=button ng-click=hideModal() class=close>&times;</button>\n    <div ng-controller=Reviews ng-include="\'/views/reviews.html\'"></div>\n</div>\n<div class=modal-footer>\n    <button type=button class="btn btn-primary" ng-click=hideModal()>Close</button>\n</div>'),a.put("/views/video.html",'<article class=video>\n    <lw-video-header video=video social-url=socialUrl social-text=socialText></lw-video-header>\n    <div lw-sticky="">\n        <div class=player lw-top-half="{{videoWidth / videoHeight}}">\n            <lw-video source=sources.current></lw-video>\n        </div>\n    </div>\n    <div class=sources ng-if=sources.remaining.length>\n        Playing from {{sources.current | fancySource}}. Also available on\n        <span ng-repeat="source in sources.remaining">\n            <a href=# ng-click=setSource(source)>{{source | fancySource}}</a>{{$last ? \'.\' : \' and \'}}\n        </span>\n    </div>\n    <div class=buttons>\n        <lw-social url=socialUrl text=socialText></lw-social>\n    </div>\n    <div class="lines padded">\n        <div ng-repeat="line in video.lines">\n            <h3 class=zh-cn>{{line[\'zh-CN\']}}</h3>\n            <div class=translation ng-class="{\'hidden-translation\': !line.showTranslation}">\n                <div class=show-translation-container>\n                    <button type=button class="btn btn-sm" ng-click=toggleTranslation(line)>Translation</button>\n                </div>\n                <div class=text>\n                    <h4 class=pinyin>{{line[\'pinyin\']}}</h4>\n                    <h4 class=en-us>{{line[\'en-US\']}} <button type=button class="btn btn-sm" ng-click=toggleTranslation(line)>Hide</button></h4>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=buttons>\n        <lw-social url=socialUrl text=socialText></lw-social><a class="btn btn-primary more" href=/videos>More videos</a>\n    </div></article>'),a.put("/views/videos.html",'<lw-admin>\n    <a href="/admin/new/video?category=" target=_blank class="btn btn-xs new">New</a>\n</lw-admin>\n<article ng-repeat="video in videos">\n    <lw-video-header video=video></lw-video-header>\n    <a title=Watch class=preview href=/video/{{video.id}}/{{video.slug}}>\n        <img class=poster ng-src="{{video | imgSrc: 1200}}">\n        <div class="overlay horizontal-center" lw-center="">\n            <span class="icon icon-play-white"></span>\n        </div>\n    </a>\n</article>\n<div class=buttons>\n    <lw-more></lw-more>\n</div>')
}]);